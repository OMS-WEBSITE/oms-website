---
import Layout from '../layouts/main.astro';
import Header from '@/components/layout/Header';
import Footer from '@/components/layout/Footer';
import JobList from '@/components/ui/reactjoblist.jsx';
import { Button } from '@/components/ui/button';
import fs from "fs";
import Papa from "papaparse";

const seo = {
  title: "Careers at OMS Software | Security & Compliance Jobs",
  description:
    "Join OMS Software and help shape the future of security auditing. We offer competitive benefits, remote work options, and roles in engineering, security, and product.",
  image: "/og-image.png",
  canonicalURL: Astro.site + Astro.url.pathname,
};

const csv = fs.readFileSync("./src/data/jobs.csv", "utf8");
const { data } = Papa.parse(csv, { header: true });
const jobs = data.filter((j: any) => j.title);
---

<Layout {...seo}>
  <!-- Main Content -->
  <main class="bg-gray-50">
    <!-- Open Positions Section -->
    <section class="py-12 sm:py-16 md:py-20">
      <div class="container mx-auto max-w-7xl px-4">
        <div class="flex justify-center mb-8 sm:mb-12">
          <h2 class="text-2xl sm:text-3xl font-bold text-gray-800 border-b-4 border-orange-500 pb-2">
            Open Positions
          </h2>
        </div>

        <!-- React Job List Component -->
        <JobList client:load jobs={jobs} />
      </div>
    </section>

    <!-- Submit Resume Section -->
    <section class="py-12 sm:py-16 md:py-20 bg-gradient-to-r from-orange-100 to-blue-100">
      <div class="container mx-auto max-w-4xl px-4 text-center">
        <h2 class="text-2xl sm:text-3xl font-bold text-gray-800 mb-4 sm:mb-6">
          Don't See the Right Role?
        </h2>
        <p class="text-base sm:text-lg text-gray-600 mb-6 sm:mb-8">
          We're always looking for talented individuals to join our team. Send us your resume and we'll keep you in mind for future opportunities.
        </p>
        <Button className="bg-orange-500 hover:bg-orange-600 text-white px-6 py-3 rounded-md shadow-md hover:shadow-lg transition-all duration-300">
          Submit Your Resume
        </Button>
      </div>
    </section>
  </main>

</Layout>

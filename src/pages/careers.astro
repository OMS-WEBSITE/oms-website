---
import Layout from '../layouts/main.astro';
import Header from '@/components/layout/Header';
import Footer from '@/components/layout/Footer';
import ReactJobList from '@/components/ui/reactjoblist.jsx';
import { Button } from '@/components/ui/button';
import fs from "fs";
import Papa from "papaparse";

const seo = {
  title: "Careers at OMS Software | Security & Compliance Jobs",
  description:
    "Join OMS Software and help shape the future of security auditing. We offer competitive benefits, remote work options, and roles in engineering, security, and product.",
  image: "/og-image.png",
  canonicalURL: Astro.site + Astro.url.pathname,
};

const csv = fs.readFileSync("./src/data/jobs.csv", "utf8");
const { data } = Papa.parse(csv, { header: true });
const jobs = data.filter((j) => j.title);
---

<Layout {...seo}>
  <Header client:only="react" />

  <main>
    <section class="py-16 bg-gray-50">
      <div class="container mx-auto max-w-7xl px-4">
        <div class="flex justify-center items-center mb-12">
          <h2 class="text-3xl font-bold text-gray-800">Open Positions</h2>
        </div>

        <!-- Render React component -->
        <ReactJobList client:load jobs={jobs} />
      </div>
    </section>

    <section class="py-16 bg-gradient-to-r from-orange-100 to-blue-100">
      <div class="container mx-auto max-w-7xl px-4 text-center">
        <h2 class="text-3xl font-bold text-gray-800 mb-6">
          Don't See the Right Role?
        </h2>
        <p class="text-xl text-gray-600 mb-8 max-w-3xl mx-auto">
          We're always looking for talented individuals to join our team. Send us your resume and we'll keep you in mind for future opportunities.
        </p>
        <Button className="bg-orange-500 hover:bg-orange-600 text-white">
          Submit Your Resume
        </Button>
      </div>
    </section>
  </main>

  <Footer />
</Layout>
